# Уровни и типы логов

## Уровни  логов

В идеале логи пишутся во время работы всех IT-систем, однако если писать все подряд и «складывать в кучу», полезная информация превратится в хаос. Чтобы упростить поиск и чтение логов, их делят на уровни. Основные четыре уровни:

1. **Debug** — запись масштабных переходов состояний, например,обращение к базе данных, старт/пауза сервиса, успешная обработка записи и пр.

2. **Warning** — нештатная ситуация, потенциальная проблема, может быть странный формат запроса или некорректный параметр вызова.

3. **Error** — типичная ошибка.

4. **Fatal** — тотальный сбой работоспособности, когда нет доступа к базе данных или сети, сервису не хватает места на жестком диске.

Дополнительно файл логирования может расширяться записями еще двух уровней:
1. **Trace**  — пошаговые записи процесса. Полезен, когда сложно локализовать ошибку. 

2. **Info** — общая информация о работе службы или сервиса. Работа с уровнями логирования регламентируется методическими документами и внутренними правилами организации. В них может определяться соответствие источника сообщения уровню логирования, значимость, порядок обработки каждого уровня и другие параметры.

![](https://i.ytimg.com/vi/2wyayUhb0zE/maxresdefault.jpg)

## Типы логов

Для удобства обработки логов их делят на типы:
- **системные**, связанные с системными событиями;
- **серверные**, отвечающие за процесс обращения к серверу;
- **почтовые**, работающие с отправлениями;
- **логи баз данных**, которые отражают процессы обращения к базам данных;
- **авторизационные** и **аутентификационные**, которые отвечают за процесс входа, выхода из системы, восстановление доступа и пр. У каждого типа логов свой **журнал записи**. Для проверки логов авторизации нужно идти в журнал доступов, чтобы проверить загрузку системы — в журнал dmesg, за данными о запросах пользователей — в access_log. Когда одни логи пишутся отдельно от других, проще диагностировать ситуацию и найти источник  проблемы.

## Инструменты для работы с логами

Сбор, хранение и анализ логов вручную хороши, когда у вас один сервер. Когда серверный парк разрастается, а приложений и сервисов становится больше десяти, работу с логами целесообразно автоматизировать и использовать специальные системы логирования, например, Graylog, ELK, Loggy или Splunk.
Некоторые из них позволяют организовать полномасштабный мониторинг, настроить алерт раннего обнаружения конкретной проблемы или установить пороговые значения показателей, коррелирующих с угрозами информационной безопасности.
Логи сетевого, инженерного оборудования, баз данных и приложений мы храним в облачном хранилище. Даже когда у вас полно места на жестких дисках и стоит мощная защита на все случаи жизни. Оборудование рано или поздно, а чаще неожиданно, выходит из строя, а злоумышленники давно умеют чистить файлы логирования, так что логи в облаке - это возможность восстановить события и расследовать инцидент даже при полном отказе системы.

Логи хранятся в файлах с **расширением  log**. Их можно открыть как обычные текстовые файлы и просмотреть содержимое.
Имя лога состоит из двух частей: назначение файла и приставка.
Например, данные о посещениях — это “access_log", а об ошибках “error_log”.

![](https://kolomonos.ru/wp-content/uploads/2021/12/1576066707549-5df0de9440ba0.png)

Используются накопленные данные файлов для обслуживания и продвижения сайта. Для этого есть специальные программы, компании продают пользователям свои услуги, но все начинается с изучения зафиксированных событий.
При технических неполадках, дисконнекте, вирусном заражении, дудос атаке хакеров, сисадмин ресурса может решить по сведениям логов, какие действия предпринять, чтобы устранить проблему.
Для оптимизации сайта SEO-специалист по информации «log file» может оценить трафик, изучить поведение юзеров на сайте, сформировать рекомендации по улучшению работы сайта, выбрать стратегии по продвижению и раскрутке.
В этих файлах есть всё от IP-адрес и МАС-адреса до того, кто с какого ресурса просматривал страницы на сервере.

## Программы для просмотра логов

1. Менеджер событий **SolarWinds Security** - автоматические меры защиты встроены в этот монитор журнала для Windows Server.

2. Сетевой монитор **Paessler PRTG** - монитор сети, сервера и приложений, включающий приемники журнала событий Windows и системного журнала.

3. **Papertrail** - облачный менеджер логов и анализатор с бесплатной версией.

4. **Loggly** - онлайн-консолидатор логов с отличными инструментами анализа.

5. **ManageEngine EventLog Analyzer** - комплексный монитор событий для Windows Server.

6. **Splunk** - широко используемый монитор журналов с оповещениями в режиме реального времени, доступный для Windows.

7. **XpoLog** - интерактивный монитор журнала, которые использует AI для обнаружения ошибок и вторжений.

8. **LOGalyze** - бесплатный монитор журнала с открытым кодом.

9. **Datadog** - онлайн анализатор логов с живыми оповещениями.

10. **EventTracker** - анализатор и менеджер сообщений журнала для сред Windows.

11. **LogDNA** - облачный анализатор сообщений в реальном времени доступен по подписке.
